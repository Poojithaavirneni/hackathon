import{r as a,R as e,d as T,a as N,b as w,c as F,u as L}from"./index-DQpXCTSR.js";import{g as x,b as G,c as U,d as E,e as V,f as $,h as q,i as B,u as I,j}from"./api-EJ8FY_IZ.js";function Q(){const[r,g]=a.useState(null),[h,y]=a.useState([]),[v,b]=a.useState([]),[f,k]=a.useState([]),[i,u]=a.useState(""),[o,m]=a.useState(null),[s,c]=a.useState({title:"",category:"General",type:"article",content:"",url:""}),[d,C]=a.useState([]);a.useEffect(()=>{n()},[]);function n(){x().then(g).catch(()=>{}),G().then(y).catch(()=>{}),U().then(b).catch(()=>{}),E().then(k).catch(()=>{}),V().then(C).catch(()=>{})}const R=t=>{t.preventDefault(),B({title:i,category:"General",type:"article",content:"Admin uploaded."}).then(()=>{u(""),n()})},A=t=>{E().then(()=>{}),w(t).then(l=>{m(t),c({title:l.title||"",category:l.category||"General",type:l.type||"article",content:l.content||"",url:l.url||""})}).catch(()=>{})},D=t=>{t.preventDefault(),o&&I(o,s).then(()=>{m(null),c({title:"",category:"General",type:"article",content:"",url:""}),n()}).catch(()=>{})},S=t=>{confirm("Delete resource?")&&j(t).then(()=>n()).catch(()=>F(t).then(()=>n()).catch(()=>alert("Delete failed")))},p=(t,l)=>{L(t,l).then(()=>n()).catch(()=>{})};return e.createElement("div",null,e.createElement("h2",null,"Admin Dashboard"),e.createElement("section",{className:"card"},e.createElement("h3",null,"Quick Stats"),r?e.createElement("div",{style:{display:"flex",gap:"1rem"}},e.createElement("div",{className:"card",style:{padding:"0.8rem"}},e.createElement("strong",null,r.totalResources),e.createElement("div",null,"Resources")),e.createElement("div",{className:"card",style:{padding:"0.8rem"}},e.createElement("strong",null,r.appointments),e.createElement("div",null,"Appointments"))):e.createElement("p",null,"Loading...")),e.createElement("section",{className:"card",style:{marginTop:"1rem"}},e.createElement("h3",null,"Feedback"),d.length?e.createElement("ul",null,d.map(t=>e.createElement("li",{key:t.id,style:{marginBottom:".6rem"}},e.createElement("div",null,e.createElement("strong",null,t.name||"Anonymous")," ",e.createElement("small",{style:{color:"#666"}},t.email||""," • ",new Date(t.created).toLocaleString())),e.createElement("div",{style:{marginTop:4}},t.message),e.createElement("div",{style:{marginTop:4}},e.createElement("button",{onClick:()=>{confirm("Delete feedback?")&&$(t.id).then(()=>n()).catch(()=>T(t.id).then(()=>n()).catch(()=>alert("Delete failed")))}},"Delete"))))):e.createElement("p",null,"No feedback yet.")),e.createElement("section",{className:"card",style:{marginTop:"1rem"}},e.createElement("h3",null,"Create Resource"),e.createElement("form",{onSubmit:R,style:{display:"flex",gap:".5rem",alignItems:"center"}},e.createElement("input",{value:i,onChange:t=>u(t.target.value),placeholder:"Title",required:!0}),e.createElement("button",null,"Create"))),e.createElement("section",{className:"card",style:{marginTop:"1rem"}},e.createElement("h3",null,"Most viewed resources"),e.createElement("ol",null,r&&r.mostViewed.length?r.mostViewed.map(t=>e.createElement("li",{key:t.id},t.title," — ",t.views," views")):e.createElement("li",null,"No data")),e.createElement("h4",{style:{marginTop:".8rem"}},"All resources"),e.createElement("ul",null,f.map(t=>e.createElement("li",{key:t.id,style:{marginBottom:".4rem"}},e.createElement("strong",null,t.title)," ",e.createElement("small",{style:{color:"#666"}},t.category," • ",t.type),e.createElement("div",{style:{marginTop:".3rem"}},e.createElement("button",{onClick:()=>A(t.id)},"Edit"),e.createElement("button",{style:{marginLeft:6},onClick:()=>S(t.id)},"Delete"))))),o&&e.createElement("form",{onSubmit:D,style:{marginTop:".6rem",display:"grid",gap:".5rem"}},e.createElement("input",{value:s.title,onChange:t=>c(l=>({...l,title:t.target.value})),placeholder:"Title",required:!0}),e.createElement("input",{value:s.category,onChange:t=>c(l=>({...l,category:t.target.value})),placeholder:"Category"}),e.createElement("select",{value:s.type,onChange:t=>c(l=>({...l,type:t.target.value}))},e.createElement("option",{value:"article"},"Article"),e.createElement("option",{value:"video"},"Video"),e.createElement("option",{value:"link"},"Link")),e.createElement("input",{value:s.url,onChange:t=>c(l=>({...l,url:t.target.value})),placeholder:"URL (optional)"}),e.createElement("textarea",{value:s.content,onChange:t=>c(l=>({...l,content:t.target.value})),placeholder:"Content"}),e.createElement("div",null,e.createElement("button",{type:"submit"},"Save"),e.createElement("button",{type:"button",onClick:()=>{m(null),c({title:"",category:"General",type:"article",content:"",url:""})},style:{marginLeft:6}},"Cancel")))),e.createElement("section",{className:"card",style:{marginTop:"1rem"}},e.createElement("h3",null,"Appointments"),e.createElement("table",{style:{width:"100%",borderCollapse:"collapse"}},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"ID"),e.createElement("th",null,"Name"),e.createElement("th",null,"Email"),e.createElement("th",null,"Datetime"),e.createElement("th",null,"Status"),e.createElement("th",null,"Action"))),e.createElement("tbody",null,v.map(t=>e.createElement("tr",{key:t.id,style:{borderTop:"1px solid #eef"}},e.createElement("td",null,t.id),e.createElement("td",null,t.name),e.createElement("td",null,t.email),e.createElement("td",null,t.datetime),e.createElement("td",null,t.status),e.createElement("td",null,t.status!=="accepted"&&e.createElement("button",{onClick:()=>p(t.id,"accepted")},"Accept"),t.status!=="declined"&&e.createElement("button",{onClick:()=>p(t.id,"declined")},"Decline"),e.createElement("button",{style:{marginLeft:6},onClick:()=>{confirm("Delete appointment?")&&q(t.id).then(()=>n()).catch(()=>N(t.id).then(()=>n()).catch(()=>alert("Delete failed")))}},"Delete"))))))),e.createElement("section",{className:"card",style:{marginTop:"1rem"}},e.createElement("h3",null,"Users"),e.createElement("ul",null,h.map(t=>e.createElement("li",{key:t.id},t.name," — ",t.email," — ",t.role)))))}export{Q as default};
