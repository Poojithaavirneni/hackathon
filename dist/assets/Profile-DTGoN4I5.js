import{r as s,g as w,n as C,R as e,o as S}from"./index-DQpXCTSR.js";function V({onUpdated:o,onNavigate:u}){const[l,E]=s.useState(null),[f,c]=s.useState(!1),[n,i]=s.useState({name:"",email:"",routine:[]}),[m,N]=s.useState({resourcesViewed:0,appointments:0,recentViews:[],moodSummary:[],lastLogin:null}),[d,p]=s.useState("");if(s.useEffect(()=>{w().then(t=>{E(t),t&&(i({name:t.name||"",email:t.email||"",routine:t.routine||[]}),C(t.id).then(a=>N(a)).catch(()=>{}))})},[]),!l)return e.createElement("div",null,e.createElement("h3",null,"No profile"),e.createElement("p",null,"Please login to view your profile."));function v(t,a){i(r=>({...r,[t]:a}))}function g(){i(t=>({...t,routine:[...t.routine,"New task"]}))}function h(t,a){const r=[...n.routine];r[t]=a,i(y=>({...y,routine:r}))}function b(t){const a=[...n.routine];a.splice(t,1),i(r=>({...r,routine:a}))}function k(){const t={name:n.name,email:n.email,routine:n.routine};S(l.id,t).then(a=>{E(a),c(!1),o&&o(a),p("Profile saved"),setTimeout(()=>p(""),2500)})}return e.createElement("div",null,e.createElement("h2",null,"Profile"),f?e.createElement("section",{className:"card"},e.createElement("h3",null,"Edit profile"),e.createElement("label",null,"Name"),e.createElement("input",{value:n.name,onChange:t=>v("name",t.target.value)}),e.createElement("label",null,"Email"),e.createElement("input",{value:n.email,onChange:t=>v("email",t.target.value)}),e.createElement("h4",null,"Daily routine"),e.createElement("div",null,n.routine.map((t,a)=>e.createElement("div",{key:a,className:"routine-item"},e.createElement("input",{value:t,onChange:r=>h(a,r.target.value)}),e.createElement("button",{onClick:()=>b(a)},"Remove"))),e.createElement("div",null,e.createElement("button",{onClick:g},"Add task"))),e.createElement("div",{style:{marginTop:".8rem"}},e.createElement("button",{onClick:k,className:"primary"},"Save"),e.createElement("button",{onClick:()=>c(!1),style:{marginLeft:".6rem"}},"Cancel")),d&&e.createElement("div",{className:"save-msg"},d)):e.createElement("section",{className:"card"},e.createElement("div",{className:"profile-head"},e.createElement("div",{className:"profile-avatar"},l.name?l.name.split(" ").map(t=>t[0]).slice(0,2).join("").toUpperCase():"U"),e.createElement("div",{className:"profile-meta"},e.createElement("h3",{className:"profile-name"},l.name),e.createElement("div",{className:"profile-sub"},l.email," â€¢ ",e.createElement("small",{className:"role"},l.role)))),e.createElement("div",{className:"profile-grid"},e.createElement("div",null,e.createElement("h4",null,"Daily routine"),l.routine&&l.routine.length?e.createElement("ol",null,l.routine.map((t,a)=>e.createElement("li",{key:a},t))):e.createElement("p",null,"No routine set yet.")),e.createElement("aside",{className:"profile-aside"},e.createElement("h4",{className:"small-title"},"Quick stats"),e.createElement("div",{className:"profile-stats"},e.createElement("div",null,e.createElement("strong",null,m.resourcesViewed),e.createElement("div",{className:"stat-label"},"Resources viewed")),e.createElement("div",null,e.createElement("strong",null,m.appointments),e.createElement("div",{className:"stat-label"},"Appointments"))),e.createElement("h5",{className:"small-title"},"Recent views"),e.createElement("ul",{className:"recent-list"},m.recentViews&&m.recentViews.length?m.recentViews.map(t=>e.createElement("li",{key:t.id},e.createElement("span",{className:"rv-title"},t.title)," ",e.createElement("small",{className:"rv-time"},new Date(t.when).toLocaleString()))):e.createElement("li",{className:"muted"},"No recent views")),e.createElement("div",{className:"profile-actions"},e.createElement("button",{className:"primary"},"Edit routine & actions"),e.createElement("button",{className:"btn-export"},"Export")),e.createElement("div",{className:"profile-actions small"},e.createElement("button",{className:"secondary"},"Settings"),e.createElement("button",{className:"primary",onClick:()=>u?u("mental"):null},"Book appointment")))),e.createElement("div",{className:"profile-edit"},e.createElement("button",{onClick:()=>c(!0)},"Edit profile"))))}export{V as default};
